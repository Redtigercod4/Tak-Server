"use strict";(self.webpackChunkdocusaurus_static=self.webpackChunkdocusaurus_static||[]).push([[7995],{2878:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var r=n(5893),a=n(1151);const o={},t="Single-Server Upgrade",l={id:"upgrade/singleserver",title:"Single-Server Upgrade",description:"Rocky Linux 8",source:"@site/docs/upgrade/singleserver.md",sourceDirName:"upgrade",slug:"/upgrade/singleserver",permalink:"/docs/upgrade/singleserver",draft:!1,unlisted:!1,editUrl:"https://gitlab.com/octospacc/editocttrialTools/-/blob/main/docusaurus-static/docs/upgrade/singleserver.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/upgrade/overview"},next:{title:"Two-Server Upgrade",permalink:"/docs/upgrade/twoserver"}},d={},i=[{value:"Rocky Linux 8",id:"rocky-linux-8",level:2},{value:"RHEL 8",id:"rhel-8",level:2},{value:"RHEL 7",id:"rhel-7",level:2},{value:"Ubuntu and Raspberry Pi OS",id:"ubuntu-and-raspberry-pi-os",level:2},{value:"Centos 7",id:"centos-7",level:2}];function c(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"single-server-upgrade",children:"Single-Server Upgrade"}),"\n",(0,r.jsx)(s.h2,{id:"rocky-linux-8",children:"Rocky Linux 8"}),"\n",(0,r.jsx)(s.p,{children:"Install EPEL (EPEL provides certain dependencies required by PostgreSQL.) Install postgres yum repository. Install java 17. Disable the postgresql module (so the later postgresql and postgis specific versions aren't inaccessible due to 'modular filtering'). Enable PowerTools (needed for dependencies of postgis.) Install TAK server."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo dnf install epel-release -y\nsudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm\nsudo dnf -qy module disable postgresql && sudo dnf update -y\nsudo dnf install java-17-openjdk-devel -y\nsudo dnf config-manager --set-enabled powertools\n"})}),"\n",(0,r.jsx)(s.p,{children:"Upgrade Tak server"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo dnf install takserver-5.1-RELEASEx.noarch.rpm --setopt=clean_requirements_on_remove=false -y\n"})}),"\n",(0,r.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,r.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,r.jsx)(s.h2,{id:"rhel-8",children:"RHEL 8"}),"\n",(0,r.jsx)(s.p,{children:"Setup the extra postgres yum repo for the latest postgres and postgis. Install Java 17. Disable the postgresql stream to install the specific postgres version we depend on. Install TAK Server RPM database and its dependencies."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm -y\nsudo dnf install https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\nsudo dnf update -y && sudo dnf install java-17-openjdk-devel -y\nsudo dnf module disable postgresql\nsudo subscription-manager config --rhsm.manage_repos=1\nsudo subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"Note: If you get the error \u2018This system has no repositories available through subscriptions\u2019, you need to subscribe your system with:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo subscription-manager register --username <your_username> --password <your_password> --auto-attach\n"})}),"\n",(0,r.jsx)(s.p,{children:"Upgrade Tak server"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo dnf install takserver-5.1-RELEASEx.noarch.rpm --setopt=clean_requirements_on_remove=false -y\n"})}),"\n",(0,r.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,r.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,r.jsx)(s.h2,{id:"rhel-7",children:"RHEL 7"}),"\n",(0,r.jsx)(s.p,{children:"If you have not previously done so, install EPEL (EPEL provides certain dependencies required by PostgreSQL.) Install postgres yum repository (required in order to install up-to-date Postgresql and PostGIS packages.) Install OpenJDK 17 and other dependencies. Upgrade TAK server"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm -y\nsudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\nsudo yum install -y postgis33_15 postgis33_15-utils\nsudo yum install -y postgresql15-server postgresql15-contrib\nsudo yum install -y https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.rpm\nsudo rpm -Uvh takserver-5.1-RELEASEx.noarch.rpm --nodeps\n"})}),"\n",(0,r.jsx)(s.p,{children:"Note that the yum package manager does not currently support JDK 17 on Centos 7 and RHEL 7. By installing the package manually, you will be responsible for future security updates. For a safer long-term solution, we recommend that you update your OS to RHEL 8 or Rocky Linux 8."}),"\n",(0,r.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,r.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,r.jsx)(s.h2,{id:"ubuntu-and-raspberry-pi-os",children:"Ubuntu and Raspberry Pi OS"}),"\n",(0,r.jsx)(s.p,{children:"Upgrade Tak server"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo apt install ./takserver-5.1-RELEASEx_all.deb\n"})}),"\n",(0,r.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,r.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,r.jsx)(s.h2,{id:"centos-7",children:"Centos 7"}),"\n",(0,r.jsx)(s.p,{children:"If you have not previously done so, install EPEL (EPEL provides certain dependencies required by PostgreSQL.)  Install postgres yum repository (required in order to install up-to-date Postgresql and PostGIS packages.) Install OpenJDK 17 and other dependencies. Upgrade Tak server."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo yum install epel-release -y\nsudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\nsudo yum install -y postgis33_15 postgis33_15-utils\nsudo yum install -y postgresql15-server postgresql15-contrib\nsudo yum install -y https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.rpm\nsudo rpm -Uvh takserver-5.1-RELEASEx.noarch.rpm --nodeps\n"})}),"\n",(0,r.jsx)(s.p,{children:"Note that the yum package manager does not currently support JDK 17 on Centos 7 and RHEL 7. By installing the package manually, you will be responsible for future security updates. For a safer long-term solution, we recommend that you update your OS to RHEL 8 or Rocky Linux 8."}),"\n",(0,r.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,r.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})})]})}function u(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>t});var r=n(7294);const a={},o=r.createContext(a);function t(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);