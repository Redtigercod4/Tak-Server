"use strict";(self.webpackChunkdocusaurus_static=self.webpackChunkdocusaurus_static||[]).push([[3354],{9475:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var t=n(5893),r=n(1151);const a={},o="TAK Server Installation",l={id:"installation/oneserver/takserverinstallation",title:"TAK Server Installation",description:"Rocky Linux 8",source:"@site/docs/installation/oneserver/takserverinstallation.md",sourceDirName:"installation/oneserver",slug:"/installation/oneserver/takserverinstallation",permalink:"/docs/installation/oneserver/takserverinstallation",draft:!1,unlisted:!1,editUrl:"https://gitlab.com/octospacc/editocttrialTools/-/blob/main/docusaurus-static/docs/installation/oneserver/takserverinstallation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Prerequisites",permalink:"/docs/installation/oneserver/prerequisite"},next:{title:"Configure TAK Server Installation",permalink:"/docs/installation/oneserver/takserverconfiguration"}},i={},d=[{value:"Rocky Linux 8",id:"rocky-linux-8",level:2},{value:"RHEL 8",id:"rhel-8",level:2},{value:"RHEL 7",id:"rhel-7",level:2},{value:"Ubuntu and Raspberry Pi OS",id:"ubuntu-and-raspberry-pi-os",level:2},{value:"CentOS 7",id:"centos-7",level:2},{value:"yum Install From tak.gov",id:"yum-install-from-takgov",level:2}];function p(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"tak-server-installation",children:"TAK Server Installation"}),"\n",(0,t.jsx)(s.h2,{id:"rocky-linux-8",children:"Rocky Linux 8"}),"\n",(0,t.jsx)(s.p,{children:"Install EPEL (EPEL provides certain dependencies required by PostgreSQL.) Install postgres yum repository. Install java 17. Disable the postgresql module (so the later postgresql and postgis specific versions aren't inaccessible due to 'modular filtering'). Enable PowerTools (needed for dependencies of postgis.) Install TAK server. Apply SELinux takserver-policy."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.em,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf install epel-release -y\nsudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm\nsudo dnf -qy module disable postgresql && sudo dnf update -y\nsudo dnf install java-17-openjdk-devel -y\nsudo dnf config-manager --set-enabled powertools\nsudo dnf install takserver-5.2-RELEASEx.noarch.rpm -y\nsudo dnf install checkpolicy\ncd /opt/tak && sudo ./apply-selinux.sh && sudo semodule -l | grep takserver\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"rhel-8",children:"RHEL 8"}),"\n",(0,t.jsx)(s.p,{children:"RHEL8 FIPS mode Support. TAK Server has experimental support for RHEL8 FIPS mode. This is intended for evaluation only, for hardened environments. These steps enable TAK Server to operate with RHEL FIPS mode enabled, but does not provide full FIPS 140 compliance. See below for a new option for certs script when using FIPS mode. Client certificates generated with FIPS mode may not work with ATAK."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo rpm --import http://download.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-8\nsudo rpm --import https://download.postgresql.org/pub/repos/yum/RPM-GPG-KEY-PGDG\nsudo vi /etc/fapolicyd/rules.d/99-whitelist.rules\n"})}),"\n",(0,t.jsx)(s.p,{children:"Add line:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"deny perm=any all : all\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo vi /etc/fapolicyd/rules.d/39-tak.rules\n"})}),"\n",(0,t.jsx)(s.p,{children:"Add lines:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"allow perm=open all : dir=/opt/tak/ ftype=application/x-sharedlib trust=0\nallow perm=open exe=/usr/pgsql-15/bin/postgres : all\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Custom certificates with stronger algorithms will need to be generated for use on systems with FIPS enabled. To do this: follow the existing certificate instructions, but append --fips to the end of each ./makeRootCa.sh and ./makeCert.sh command. Note: ATAK may not support certificates generated with these stronger algorithms*"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"--- End FIPS Mode Commands ---"}),"\n",(0,t.jsx)(s.p,{children:"Install EPEL (EPEL provides certain dependencies required by PostgreSQL.) Install postgres yum repository. Install java 17. Disable the postgresql module (so the later postgresql and postgis specific versions aren't inaccessible due to 'modular filtering'). Enable Repository Management and repository CodeReady Builder. Install TAK server. Apply SELinux takserver-policy."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.em,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm -y\nsudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm\nsudo dnf update -y && sudo dnf install java-17-openjdk-devel -y\nsudo dnf module disable postgresql\nsudo subscription-manager config --rhsm.manage_repos=1\nsudo subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n"})}),"\n",(0,t.jsx)(s.p,{children:"Note: If you get the error \u2018This system has no repositories available through subscriptions\u2019, you need to subscribe your system with:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo subscription-manager register --username <your_username> --password <your_password> --auto-attach\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf install takserver-5.2-RELEASEx.noarch.rpm -y\nsudo dnf install checkpolicy\ncd /opt/tak && sudo ./apply-selinux.sh && sudo semodule -l | grep takserver\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"rhel-7",children:"RHEL 7"}),"\n",(0,t.jsx)(s.p,{children:"Install EPEL (EPEL provides certain dependencies required by PostgreSQL.) Install postgres yum repository (required in order to install up-to-date Postgresql and PostGIS packages.) Install OpenJDK 17 and other dependencies. Install TAK server"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.em,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm -y\nsudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\nsudo yum install -y postgis33_15 postgis33_15-utils\nsudo yum install -y postgresql15-server postgresql15-contrib\nsudo yum install -y https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.rpm\nsudo rpm -ivh takserver-5.2-RELEASEx.noarch.rpm --nodeps\n"})}),"\n",(0,t.jsx)(s.p,{children:"Note that the yum package manager does not currently support JDK 17 on RHEL 7. By installing the package manually, you will be responsible for future security updates. For a safer long-term solution, we recommend that you update your OS to RHEL 8 or Rocky Linux 8."}),"\n",(0,t.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"ubuntu-and-raspberry-pi-os",children:"Ubuntu and Raspberry Pi OS"}),"\n",(0,t.jsx)(s.p,{children:"Install the postgres repository (required in order to install up-to-date Postgresql and PostGIS packages.) Install TAK server"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo mkdir -p /etc/apt/keyrings\nsudo curl https://www.postgresql.org/media/keys/ACCC4CF8.asc --output /etc/apt/keyrings/postgresql.asc\nsudo sh -c 'echo \"deb [signed-by=/etc/apt/keyrings/postgresql.asc] http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/postgresql.list'\nsudo apt update\nsudo apt install ./takserver-5.2-RELEASEx_all.deb\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"centos-7",children:"CentOS 7"}),"\n",(0,t.jsx)(s.p,{children:"Install EPEL (EPEL provides certain dependencies required by PostgreSQL.)  Install postgres yum repository (required in order to install up-to-date Postgresql and PostGIS packages.) Install OpenJDK 17 and other dependencies. Install Tak server."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.em,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo yum install epel-release -y\nsudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\nsudo yum install -y postgis33_15 postgis33_15-utils\nsudo yum install -y postgresql15-server postgresql15-contrib\nsudo yum install -y https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.rpm\nsudo rpm -ivh takserver-5.2-RELEASEx.noarch.rpm --nodeps\n"})}),"\n",(0,t.jsx)(s.p,{children:"Note that the yum package manager does not currently support JDK 17 on CentOS 7. By installing the package manually, you will be responsible for future security updates. For a safer long-term solution, we recommend that you update your OS to RHEL 8 or Rocky Linux 8."}),"\n",(0,t.jsx)(s.p,{children:"Check Java version:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:"This should tell you have 17.x.y. If the command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"yum-install-from-takgov",children:"yum Install From tak.gov"}),"\n",(0,t.jsx)(s.p,{children:"Check to see if a .repo file exists for tak.gov"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ls /etc/yum.repos.d/Takserver.repo\n"})}),"\n",(0,t.jsx)(s.p,{children:"If it exists, skip down to the yum install of takserver database.  If it doesn't exist, create a new .repo file to point yum to the yum repo on tak.gov."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cd /etc/yum.repos.d\nsudo vi Takserver.repo\n"})}),"\n",(0,t.jsx)(s.p,{children:"You can also edit using another editor besides vi. Update the file Takserver.repo to contain:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"[takrepo]\nname=TakserverRepository\nbaseurl=https://<ARTIFACTORY_USER>:<ARTIFACTORY_TOKEN>@artifacts.tak.gov/artifactory/takserver-yum\nenabled=1\ngpgcheck=0\n"})}),"\n",(0,t.jsx)(s.p,{children:'Where <ARTIFACTORY_USER> is a valid login to Artifactory that has access to the takserver-yum repo and <ARTIFACTORY_TOKEN> is a special token unique to the given Artifactory user that can be retrieved by that user using the "Set Me Up" menu option to retrieve it.'}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.em,{children:"Note: Do NOT use your password as it the Token is more secure and cannot be used for logging in.  Only for retrieving or publishing.   Also note:  When you change the password of the given user, you will also need to retrieve the new token which is based on it and update the baseurl in the Takserver.repo file."})}),"\n",(0,t.jsx)(s.p,{children:"Save the Takserver.repo file and then do the install of the takserver."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo yum install takserver-core-5.2-RELEASEx\n"})})]})}function c(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>o});var t=n(7294);const r={},a=t.createContext(r);function o(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);