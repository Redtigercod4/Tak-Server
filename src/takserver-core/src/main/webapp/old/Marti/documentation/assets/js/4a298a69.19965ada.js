"use strict";(self.webpackChunkdocusaurus_static=self.webpackChunkdocusaurus_static||[]).push([[6203],{119:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var t=n(5893),r=n(1151);const a={},o="Dependency Setup",l={id:"installation/twoserver/serverone/dependencysetup",title:"Dependency Setup",description:"First, update firewall rules to allow communication with server two, for TCP port 5432.",source:"@site/docs/installation/twoserver/serverone/dependencysetup.md",sourceDirName:"installation/twoserver/serverone",slug:"/installation/twoserver/serverone/dependencysetup",permalink:"/docs/installation/twoserver/serverone/dependencysetup",draft:!1,unlisted:!1,editUrl:"https://gitlab.com/octospacc/editocttrialTools/-/blob/main/docusaurus-static/docs/installation/twoserver/serverone/dependencysetup.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/installation/twoserver/overview"},next:{title:"Prerequisites",permalink:"/docs/installation/twoserver/servertwo/prerequisites"}},i={},d=[{value:"Rocky Linux 8",id:"rocky-linux-8",level:2},{value:"RHEL 8",id:"rhel-8",level:2},{value:"RHEL 7",id:"rhel-7",level:2},{value:"Ubuntu &amp; Raspberry Pi OS",id:"ubuntu--raspberry-pi-os",level:2},{value:"CentOS 7",id:"centos-7",level:2}];function p(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"dependency-setup",children:"Dependency Setup"}),"\n",(0,t.jsx)(s.p,{children:"First, update firewall rules to allow communication with server two, for TCP port 5432."}),"\n",(0,t.jsx)(s.h2,{id:"rocky-linux-8",children:"Rocky Linux 8"}),"\n",(0,t.jsx)(s.p,{children:"Setup the extra postgres yum repo for the latest postgres and postgis. Disable the postgresql stream to install the specific postgres version we depend on. Enable the 'powertools' repo for postgis dependencies. Install TAK Server RPM database and its dependencies."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf install epel-release -y\n\nsudo dnf install https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\n\nsudo dnf update -y\n\nsudo dnf module disable postgresql\n\nsudo dnf install java-17-openjdk-devel -y\n\nsudo dnf config-manager --set-enabled powertools\n\nMake sure the database RPM is in the current directory\n\nsudo dnf install takserver-database-5.2-RELEASE-x.noarch.rpm --setopt=clean_requirements_on_remove=false -y\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:'This should tell you you have 17.x.y. If the "java -version" command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"rhel-8",children:"RHEL 8"}),"\n",(0,t.jsx)(s.p,{children:"Setup the extra postgres yum repo for the latest postgres and postgis. Disable the postgresql stream to install the specific postgres version we depend on. Install TAK Server RPM database and its dependencies."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm -y\nsudo dnf install https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf update -y && sudo dnf install java-17-openjdk-devel -y\nsudo dnf module disable postgresql\nsudo subscription-manager config --rhsm.manage_repos=1\nsudo subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:'Note: If you get the error \u2018This system has no repositories available through subscriptions\u2019, you need to subscribe your system with "sudo subscription-manager register --username <your_username> --password <your_password> --auto-attach"'})}),"\n",(0,t.jsx)(s.p,{children:"Make sure the database RPM is in the current directory"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo dnf install takserver-database-5.2-RELEASE-x.noarch.rpm --setopt=clean_requirements_on_remove=false -y\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:'This should tell you you have 17.x.y. If the "java -version" command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"rhel-7",children:"RHEL 7"}),"\n",(0,t.jsx)(s.p,{children:"Setup the extra postgres yum repo for the latest postgres and postgis. Install OpenJDK 17 and other dependencies. Install TAK Server RPM database."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm -y\nsudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\n\nsudo yum update -y\n\nsudo yum install -y postgis33_15 postgis33_15-utils\nsudo yum install -y postgresql15-server postgresql15-contrib\nsudo yum install -y https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.rpm\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Note that the yum package manager does not currently support JDK 17 on RHEL 7. By installing the package manually, you will be responsible for future security updates. For a safer long-term solution, we recommend that you update your OS to RHEL 8 or Rocky Linux 8."})}),"\n",(0,t.jsx)(s.p,{children:"Make sure the database RPM is in the current directory"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo rpm -ivh takserver-database-5.2-RELEASEx.noarch.rpm --nodeps\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:'This should tell you you have 17.x.y. If the "java -version" command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"ubuntu--raspberry-pi-os",children:"Ubuntu & Raspberry Pi OS"}),"\n",(0,t.jsx)(s.p,{children:"Install the postgres repository (required in order to install up-to-date Postgresql and PostGIS packages.) Install TAK Server database. Use database DEB. Configure TAK Server Database installation"}),"\n",(0,t.jsxs)(s.p,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo mkdir -p /etc/apt/keyrings\n\nsudo curl https://www.postgresql.org/media/keys/ACCC4CF8.asc --output /etc/apt/keyrings/postgresql.asc\n\nsudo sh -c 'echo \"deb [signed-by=/etc/apt/keyrings/postgresql.asc] http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/postgresql.list'\n\nsudo apt update\n\nsudo apt install takserver-database-5.2-RELEASEx_all.deb\n"})}),"\n",(0,t.jsx)(s.p,{children:"Open the file /opt/tak/CoreConfig.example.xml and look for the auto-generated password for the database. This password will be used to configure the Core Server."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'<connection url="jdbc:postgresql://127.0.0.1:5432/cot" username="martiuser" password="Database_password" />\n'})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:'This should tell you you have 17.x.y. If the "java -version" command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})}),"\n",(0,t.jsx)(s.h2,{id:"centos-7",children:"CentOS 7"}),"\n",(0,t.jsx)(s.p,{children:"Setup the extra postgres yum repo for the latest postgres and postgis. Install OpenJDK 17 and other dependencies. Install TAK Server RPM database."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Note that when installing postgres, you may run into issues related to the GPG key \u2013 if you need to update the key, you can modify the postgres installation command based on your operating system according to the guidelines here: ",(0,t.jsx)(s.a,{href:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/",children:"https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/"})]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo yum install epel-release -y\n\nsudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm -y\n\nsudo yum update -y\n\nsudo yum install -y postgis33_15 postgis33_15-utils\nsudo yum install -y postgresql15-server postgresql15-contrib\nsudo yum install -y https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.rpm\n"})}),"\n",(0,t.jsx)(s.p,{children:"Note that the yum package manager does not currently support JDK 17 on Centos 7. By installing the package manually, you will be responsible for future security updates. For a safer long-term solution, we recommend that you update your OS to RHEL 8 or Rocky Linux 8."}),"\n",(0,t.jsx)(s.p,{children:"Make sure the database RPM is in the current directory"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo yum install takserver-database-5.2-RELEASE-x.noarch.rpm --setopt=clean_requirements_on_remove=false -y\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check Java version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -version\n"})}),"\n",(0,t.jsx)(s.p,{children:'This should tell you you have 17.x.y. If the "java -version" command tells you your Java version is not 17.x.y, then you can use the alternatives command to change it:'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo alternatives --config java\n"})})]})}function u(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>o});var t=n(7294);const r={},a=t.createContext(r);function o(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);